<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Description of how to set up Fully Automatic Layout.">
<meta name="keywords" content=" setup">
<title>Layout Setup | DocVisor Tool Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="documentation-theme-jekyll" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> DocVisor Tool Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/ihdia/docvisor" target="_blank" rel="noopener">GitHub</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Products<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="mydoc_introduction.html">Jekyll Documentation Theme</a></li>
                        
                        
                        
                        <li><a href="p1_landing_page.html">Product 1</a></li>
                        
                        
                        
                        <li><a href="p2_landing_page.html">Product 2</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:khadiravana.belagavi@research.iiit.ac.in?subject=DocVisor Help feedback&body=I have some feedback about the Layout Setup page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Layout Setup">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">DocVisor 1.0</li>
  
  
  
      
  
  <li>
      <a title="Overview" href="#">Overview</a>
      <ul>
          
          
          
          <li><a title="Introduction" href="index.html">Introduction</a></li>
          
          
          
          
          
          
          <li><a title="Get started" href="my_doc_getting_started.html">Get started</a></li>
          
          
          
          
          
          
          <li><a title="Paper" href="paper.html">Paper</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="OCR" href="#">OCR</a>
      <ul>
          
          
          
          <li><a title="Layout Setup" href="ocr_layout.html">Layout Setup</a></li>
          
          
          
          
          
          
          <li><a title="Text to Image Mapping" href="text2Image.html">Text to Image Mapping</a></li>
          
          
          
          
          
          
          <li><a title="Image to Text Mapping" href="image2Text.html">Image to Text Mapping</a></li>
          
          
          
          
          
          
          <li><a title="Metrics" href="ocr_metrics.html">Metrics</a></li>
          
          
          
          
          
          
          <li><a title="Navigation" href="navigation.html">Navigation</a></li>
          
          
          
          
          
          
          <li><a title="Diff Visualizer" href="diffVisualizer.html">Diff Visualizer</a></li>
          
          
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Fully Automatic" href="#">Fully Automatic</a>
      <ul>
          
          
          
          <li class="active"><a title="Layout Setup" href="fa_setup.html">Layout Setup</a></li>
          
          
          
          
          
          
          <li><a title="Navigation" href="fa_navigation.html">Navigation</a></li>
          
          
          
          
          
          
          <li><a title="Visulization" href="fa_vis.html">Visulization</a></li>
          
          
          
          
          
          
          <li><a title="Settings" href="fa_settings.html">Settings</a></li>
          
          
          
          
          
          
          <li><a title="Metrics" href="fa_metrics.html">Metrics</a></li>
          
          
          
          
          
          
          <li><a title="Bookmark and Save" href="fa_bas.html">Bookmark and Save</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Box Supervised" href="#">Box Supervised</a>
      <ul>
          
          
          
          <li><a title="Layout Setup" href="box_setup.html">Layout Setup</a></li>
          
          
          
          
          
          
          <li><a title="Navigation" href="box_navigation.html">Navigation</a></li>
          
          
          
          
          
          
          <li><a title="Visualization" href="box_vis.html">Visualization</a></li>
          
          
          
          
          
          
          <li><a title="Settings" href="box_settings.html">Settings</a></li>
          
          
          
          
          
          
          <li><a title="Metrics" href="box_metrics.html">Metrics</a></li>
          
          
          
          
          
          
          <li><a title="Bookmark and Save" href="box_bas.html">Bookmark and Save</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a title="Contributors" href="#">Contributors</a>
      <ul>
          
          
          
          <li><a title="Contributors" href="contributors.html">Contributors</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Layout Setup</h1>
</div>



<div class="post-content">

   
    <div class="summary">Description of how to set up Fully Automatic Layout.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

   <h2 id="metadata">Metadata</h2>

<p>The metadata for the fully automatic tool essentially acts as a configuration file, through which the user can specify the paths of the json data for the layout, as well as the layout type which the data belongs to (Fully Automatic Region Parsing in this case). Additionally, the user can also specify other configuration data for the layout which would be rendered from this metadata, such as whether certain outputs should be shown in the plot with a mask or not. The metadata is expected to lie in the <code class="language-plaintext highlighter-rouge">metaData</code> folder within the <code class="language-plaintext highlighter-rouge">streamlit</code> folder, and must be a <code class="language-plaintext highlighter-rouge">json</code> file which follows a specific format.</p>

<p>Shown below is an example metadata file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "metaData":{
        "pageLayout": "Fully Automatic Region Parsing", 
        "pageName": "FullyAutomatic", 
        "dataPaths": {
            "Class 1":"/path/to/class_1.json",
            "Class 2":"/path/to/class_2.json",
                    .
                    .
                    .
            "Class N":"/path/to/class_N.json"
        },
        "outputMasks": {"output1":1,"output2":0, ... , "outputN":1}

    }
}
</code></pre></div></div>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">metaData</code>:<strong>dict</strong></p>

    <p>All the relevant data is within the <code class="language-plaintext highlighter-rouge">metaData</code> attribute of the json data.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pageLayout</code>:<strong>string</strong></p>

    <p><code class="language-plaintext highlighter-rouge">pageLayout</code> tells the app which layout the data should be rendered in. “Fully Automatic Region Parsing” is the expected value for the data to be rendered in the Fully Automatic Page Layout.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">pageName</code>:<strong>string</strong></p>

    <p><code class="language-plaintext highlighter-rouge">pageName</code> is the name of the instance of the page layout for the data. Since there can be multiple instances of the same layout for different data, the <code class="language-plaintext highlighter-rouge">pageName</code> attribute is essential to identify the particular page of interest.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">dataPaths</code>:<strong>dict</strong></p>

    <p><code class="language-plaintext highlighter-rouge">dataPaths</code> is a dictionary with the keys being the name of the group of data (train/test/val for example), and the values are the path to that <code class="language-plaintext highlighter-rouge">json</code> data.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">outputMasks</code>:<strong>dict</strong></p>

    <p><code class="language-plaintext highlighter-rouge">outputMasks</code> is a dictionary with the keys <code class="language-plaintext highlighter-rouge">groundTruth</code> and <code class="language-plaintext highlighter-rouge">modelPrediction</code>, and their corresponding values a boolean - whether the output should have a mask or not in the visualization plot.</p>
  </li>
</ol>

<h2 id="data-files">Data Files</h2>

<p>The data files are <code class="language-plaintext highlighter-rouge">json</code> files which contain the data that is to be visualized. Shown below is an example data file:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "bhoomi-4422268662325975730":{
        "imagePath":"/data1/hdia_dataset/bhoomi/RGARTHA DIPIKA/GOML/3076/72.jpg",
        "regions":[
            {
                "groundTruth": [], 
                "modelPrediction": [], 
                "regionLabel": "Character Line Segment", 
                "metrics": {
                    "iou": 0.8205464552270203, 
                    "hd": 20.518284528683193
                }, 
                "id": "bhoomi-4422268662325975730",
                "collection": "bhoomi"
            },
            {
                "groundTruth": [], 
                "modelPrediction": [], 
                "regionLabel": "Character Line Segment", 
                "metrics": {
                    "iou": 0.8043249199353717, 
                    "hd": 29.120439557122072
                }, 
                "id": "bhoomi-4422268662325975730",
                "collection": "bhoomi"
            }
        ]
    }
}
</code></pre></div></div>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Document ID</code>:<strong>string</strong></p>

    <p>The data is stored on a per-document basis, with an ID being the key for that document’s data. In the image shown above, data is shown for only one document. The ID of the document here is <code class="language-plaintext highlighter-rouge">bhoomi-4422268662325975730</code>.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">imagePath</code>:<strong>string</strong></p>

    <p><code class="language-plaintext highlighter-rouge">imagePath</code> is the path to the image of the document associated with the outputs to be visualized.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">regions</code>:<strong>dict</strong></p>

    <p><code class="language-plaintext highlighter-rouge">regions</code> is an array of dictionaries. Each dictionary in turn stores the regionwise data of the document. Every region which is to be visualized should be present in <code class="language-plaintext highlighter-rouge">regions</code> in the above format.</p>
  </li>
  <li>
    <ol>
      <li><code class="language-plaintext highlighter-rouge">groundTruth</code>:<strong>list</strong></li>
      <li><code class="language-plaintext highlighter-rouge">modelPrediction</code>:<strong>list</strong></li>
      <li><code class="language-plaintext highlighter-rouge">regionLabel</code>:<strong>string</strong></li>
      <li><code class="language-plaintext highlighter-rouge">id</code>:<strong>string</strong></li>
      <li><code class="language-plaintext highlighter-rouge">metrics</code>:<strong>dict</strong></li>
      <li><code class="language-plaintext highlighter-rouge">collection</code>:<strong>string</strong></li>
    </ol>
  </li>
</ol>

<p><code class="language-plaintext highlighter-rouge">groundTruth</code> and <code class="language-plaintext highlighter-rouge">modelPrediction</code> are lists of points, and are of the form <code class="language-plaintext highlighter-rouge">[[x1,y1],[x2,y2], ... , [xn,yn]]</code>. <code class="language-plaintext highlighter-rouge">groundTruth</code> is required, but <code class="language-plaintext highlighter-rouge">modelPrediction</code> need not exist for every region. Similarly, <code class="language-plaintext highlighter-rouge">regionLabel</code> and <code class="language-plaintext highlighter-rouge">id</code> are required, but <code class="language-plaintext highlighter-rouge">metrics</code> and <code class="language-plaintext highlighter-rouge">collection</code> are not. <code class="language-plaintext highlighter-rouge">regionLabel</code> is the region class label for that particular region. <code class="language-plaintext highlighter-rouge">metrics</code> can have the values of various metrics with which the user can sort the data by during visualization. <code class="language-plaintext highlighter-rouge">collection</code> is additional information pertaining to the collection from which the document was obtained.</p>

<h2 id="running-docvisor-with-the-fully-automatic-layout">Running DocVisor with the Fully Automatic Layout</h2>

<p>Once the metadata and data are stored in the correct locations, and in the correct format, DocVisor creates that instance of the layout. This way, the user can have multiple instances of the same page layout.</p>


    <div class="tags">
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2021 docVisor. All rights reserved. <br />
 Site last generated: Jun 6, 2021 <br />
<p><img src="images/iiit-new.png" alt="IIIT-H" style="height: 100px; width: 200px;"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-66296557-1','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
